# servlet

## 웹서버 란? 👉 웹페이지를 사용자에게 전송
[![](./img/springboot_img1.PNG?width=400px)]()  
  
웹서버는 데이터를 전송하기 위해 HTTP 프로토콜을 사용한다.  
일반적으로 사용자는 브라우저에 URL을 입력하고 웹페이지를 얻는다. 이때 웹서버가 하는 일은 웹페이지를 사용자에게 전송하는 것이다.  
여기서 변화가 있는 것은 HTTP 프로토콜에서 형식이 지정되는 요청(request)와 반응 메세지(response)이다.  
  
## 서블릿 👉 javax.servlet package에 정의된 인터페이스, 요청을 처리함
- 서블릿이란 javax.servlet package에 정의된 인터페이스 
- 서블릿의 라이프 사이클을 위한 세 가지 필수적인 메소드들을 정의합니다 
- init(), service(), destroy(). 
- 서블릿 객체의 생명 주기에서 서블릿 클래스가 클래스 로더에 의해 컨테이너에 `동적으로 로드`됨 
- 각 요청은 자체적인 스레드에 있으며, 서블릿 객체는 동시에 여러개의 스레드를 제공할 수 있습니다(thread not safe). 
- 더 이상 사용되지 않을 때는, JVM에 의해 가비지 컬렉팅 되어야합니다. 
<br/>

#### 1. init()
init()는 서블릿 생명 주기 중 `초기화 단계`에 호출됩니다. `javax.servlet.ServletConfig` 인터페이스를 구현하는 오브젝트가 전달되며, 이를 통해 서블릿이 웹 애플리케이션에서 `초기화 매개변수(parameter)에 접근`할 수 있도록 합니다.

#### 2. service() 
service()는 초기화 이후 각각의 요청들이 들어오면 호출됩니다. 각각의 요청들은 별도로 나누어진 스레드에서 처리됩니다.
웹 컨테이너는 모든 요청에 대해 서블릿의 service() 메소드를 요청합니다. service() 메소드는 요청의 종류를 판별하고 요청을 처리할 적절한 메소드로 전달합니다. 

#### 3. destroy()
destroy()는 서블릿 객체가 파괴되어야할 때 호출됩니다. 해당 서블릿이 가지고 있던 자원(메모리)을 release해줍니다.  
<br/><br/>


## 서블릿 컨테이너 👉 서블릿 컨테이너는 서블릿들의 생성, 실행, 파괴를 담당
[![](./img/springboot_img2.PNG?width=400px)]()  
  
사용자는 서버에 오직 정적인 웹페이지만 요청할 수 있다.  
서블릿 컨테이너는 서버 사이드에서 동적으로 웹페이지를 생성하기 위해 자바를 사용한다. 때문에 웹서버와 서블릿들이 상호작용할 때 서블릿 컨테이너는 필수적인 부분이다.  
서블릿 컨테이너는 서블릿들을 위한 상자이다.  
서블릿 컨테이너는 서블릿들의 생성, 실행, 파괴를 담당한다.  
<br/><br/>

## 서블릿 컨테이너와 웹서버는 어떻게 요청을 처리할까?
1. 웹서버가 HTTP 요청을 받습니다.  
2. 웹서버는 요청을 서블릿 컨테이너로 전달합니다.   
3. 서블릿이 컨테이너에 없다면, 서블릿을 동적으로 검색하여 컨테이너의 주소 공간에 로드합니다.  
4. 컨테이너가 서블릿의 init() 메소드를 호출하면, 서블릿이 초기화 됩니다(서블릿이 처음 로드됬을 때 한번만 호출됩니다).  
5. 컨테이너가 서블릿의 service() 메소드를 호출하여 HTTP 요청을 처리합니다(예: 요청의 데이터를 읽고, 응답을 만들어냅니다.). 서블릿은 컨테이너 주소에 남아있고, 다른 HTTP 요청들을 처리할 수 있습니다.  
6. 웹서버는 동적으로 생성된 결과를 올바른 위치에 반환합니다.  
<br/>

[![](./img/springboot_img8.PNG?width=400px)]()    

<br/><br/>

# :newspaper: Reference
[서블릿](https://scshim.tistory.com/28)
